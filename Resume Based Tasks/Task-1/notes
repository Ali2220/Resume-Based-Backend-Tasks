üî• Task 1: Real-Time Chat Backend (Design + Code)
üß† Problem Statement

You are building a real-time chat system (similar to Flux).

Users can:

Join chat rooms

Send messages

Fetch previous messages when joining

This is backend only.

üõ† Requirements
1Ô∏è‚É£ Design MongoDB Schemas

Create Mongoose schemas for:

User

ChatRoom

Message

Minimum fields:

Message must belong to:

a user

a room

Messages should be fetchable room-wise

System should scale to thousands of messages

2Ô∏è‚É£ API Endpoints (REST)

Design endpoints for:

Create chat room

Send message

Fetch last 50 messages of a room (pagination ready)

3Ô∏è‚É£ One Real-Time Question (Very Important)

Answer this clearly:

üëâ Why do we still need REST APIs when we already have Socket.IO for chat?

‚è± Time Limit

15 minutes

‚úÖ Expected Outcome

Proper schema relationships (ref)

Scalable thinking (no embedding 10k messages in one doc)

Clean endpoint design

Clear explanation (not essay)

üßæ What I Want in Your Reply

Reply with:

User, ChatRoom, Message schemas

REST API routes (just route + purpose, full code not required)

Short answer to Socket.IO vs REST question (4‚Äì5 lines max)
===========================================================

TASK 2: Design a Rate Limiting Middleware
‚è±Ô∏è Time Limit: 15 minutes
Problem Statement:
You're building an API for a chat application (similar to your Flux project). You need to implement a rate limiting middleware to prevent abuse.
Requirements:

Limit each user to 5 requests per minute to the /api/chat endpoint
Use an in-memory approach (no Redis for this task - keep it simple)
Return appropriate HTTP status code and error message when limit is exceeded
The middleware should track requests by user ID (assume req.userId is available from authentication middleware)

Expected Outcome:
Write the middleware function in JavaScript/Node.js. Your solution should:

Track request counts per user
Reset counts after 1 minute
Block excessive requests with proper error response
Allow requests to continue if under the limit
===============================================================

TASK 3: Database Schema Design & Query Optimization
‚è±Ô∏è Time Limit: 20 minutes
Problem Statement:
You're building a messaging system similar to Slack where:

Users can join multiple workspaces
Each workspace has multiple channels
Users can send messages in channels
Messages can be threaded (replies to other messages)
You need to support @mentions of users in messages

Requirements:
Part A: Schema Design (10 minutes)
Design MongoDB schemas for this system. Include:

User schema
Workspace schema
Channel schema
Message schema

Consider:

Relationships between collections (embedded vs referenced)
Indexes for performance
Fields needed for common queries

Part B: Query Problem (10 minutes)
Write a MongoDB query (using Mongoose) to:
"Fetch the last 50 messages from a specific channel, including:

Message content and timestamp
Sender's name and avatar
If it's a reply, include the parent message content
List of mentioned users' names
Sort by newest first"

This query should be optimized - explain what indexes you'd create and why.